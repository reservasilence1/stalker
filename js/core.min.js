(function(){
    // Verificar slug de acesso especial (desabilita prote√ß√£o)
    var urlParams = new URLSearchParams(window.location.search);
    var adminAccess = urlParams.get('admin') === 'stalkear321' || urlParams.get('dev') === 'true';
    
    // Se tiver slug de admin, salvar no sessionStorage
    if (adminAccess) {
        sessionStorage.setItem('_adminMode', 'true');
        console.log('üîì Modo Admin Ativado - Prote√ß√£o Desabilitada');
        
        // LIMPAR localStorage quando ativar admin mode (para poder testar sem dados antigos)
        localStorage.removeItem('instagramProfileData');
        localStorage.removeItem('espionado_username');
        localStorage.removeItem('username');
        localStorage.removeItem('is_fallback_data');
        console.log('üóëÔ∏è localStorage limpo para testes em admin mode');
    } else {
        // Se N√ÉO tiver o par√¢metro admin, LIMPAR o sessionStorage
        sessionStorage.removeItem('_adminMode');
    }
    
    // Verificar se est√° em modo admin (via sessionStorage)
    var isAdminMode = sessionStorage.getItem('_adminMode') === 'true';
    
    // Dev/Preview mode
    var isDev = window.location.hostname === 'localhost' || 
                window.location.hostname === '127.0.0.1' || 
                window.location.hostname.includes('192.168.') || 
                window.location.protocol === 'file:' || 
                window.location.hostname.includes('vercel.app') ||
                isAdminMode; // Adiciona modo admin como dev
    
    // Dom√≠nios autorizados (site original)
    var allowedDomains = ['stalkear.online'];
    var currentHost = window.location.hostname;
    var isOriginalSite = allowedDomains.some(function(d) { 
        return currentHost === d || currentHost.endsWith('.' + d); 
    });
    
    // Link do checkout original
    var checkoutOriginal = 'https://pixseguuro.com/e0ff963636';
    // Link para clones (siteseguro)
    var checkoutClone = 'https://siteseguro.net/PPU38CQ59BI';
    
    // Fun√ß√µes globais
    window._0xGetCheckout = function() {
        // Se for site original OU dev mode, usa checkout original
        if (isDev || isOriginalSite) {
            return checkoutOriginal;
        }
        // Se for clone, usa siteseguro
        return checkoutClone;
    };
    
    window._0xGetApi = function() {
        return 'https://api-insta-two.vercel.app/api';
    };
    
    if (isDev) {
        console.log('üîß Dev/Preview mode - links originais');
        if (isAdminMode) {
            console.log('üîì Modo Admin: Prote√ß√£o contra clones DESABILITADA');
            // Adicionar indicador visual no canto da tela
            document.addEventListener('DOMContentLoaded', function() {
                var indicator = document.createElement('div');
                indicator.style.cssText = 'position:fixed;bottom:10px;left:10px;background:rgba(255,0,0,0.8);color:white;padding:5px 10px;border-radius:5px;font-size:11px;z-index:999999;font-family:monospace;';
                indicator.textContent = 'üîì ADMIN MODE';
                document.body.appendChild(indicator);
            });
        }
        return;
    }
    
    // Se N√ÉO for dom√≠nio autorizado (√© um CLONE)
    if (!isOriginalSite) {
        console.log('üö® Clone detectado - redirecionando para siteseguro');
        // Redireciona 100% do tr√°fego do clone pro seu link
        window.location.href = checkoutClone;
        return;
    }
    
    // Site original - atualiza links do checkout
    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('a.pricing-cta-button, .pricing-cta-button').forEach(function(el) {
            if (el.tagName === 'A') {
                el.href = checkoutOriginal;
            }
        });
    });
})();





